y = element_blank(),
color = element_blank()) +
scale_x_date(date_breaks = "1 month",
date_labels = "%b",
expand = c(.02,-.02)) +
scale_color_colorblind()
group_counts %>%
filter(country %in% some_countries) %>% # get rid of NAs!
ggplot(aes(x = arrival_date,
y = factor(country, rev(countries$country)))) +
geom_point(alpha = .1) +
geom_vline(data = key_policy_events,
aes(xintercept = date,
color = category),
na.rm = TRUE,
size = .75) +
theme(legend.position = "top", legend.justification = 1.5, plot.title.position = "plot") + #, legend.direction legend.text.align = -1,
labs(title = "Migration policy shifts affected different nationalities differently",
x = element_blank(),
y = element_blank(),
color = element_blank()) +
scale_x_date(date_breaks = "1 month",
date_labels = "%b",
expand = c(.02,-.02)) +
scale_color_colorblind()
group_counts %>%
ggplot(aes(x = arrival_date,
y = number_in_party)) +
geom_jitter(aes(size = number_in_party),
alpha = .1, na.rm = TRUE,
show.legend = FALSE) +
scale_x_date(date_breaks="1 month",
date_labels="%b",
expand = c(.02,-.02)) +
geom_vline(data = key_policy_events,
aes(xintercept = date,
color = category),
na.rm = TRUE,
size = .75) +
labs(title ="Migration policy shifts affected individuals and groups differently",
x = element_blank(),
y = "Group Size",
color = element_blank()) +
scale_color_colorblind() +
theme(legend.position = "top", legend.justification = -.5)
# migration policy shifts affect individuals and groups differently
# plot timeline of daily arrivals with selected policy change labels
arrival_counts  %>%
ggplot(aes(x = date,
y = n,
label = description,
color = category)) +
geom_col(fill ="grey") +
geom_line(aes(y = seven_avg),
color = 'black', size = .6) +
geom_point(data = arrival_counts %>% filter(!is.na(description)),
show.legend = FALSE) +
geom_label_repel(na.rm = TRUE,
size = 2,
show.legend = FALSE,
nudge_y = 170,
max.overlaps = 11) +
scale_x_date(date_breaks="1 month",
date_labels="%b",
expand = c(.02,-.02)) +
scale_color_colorblind() +
labs(x = element_blank(),
y = "Daily Shelter Arrivals",
title = "Migration and policy events in 2021",
subtitle = "with Casa Alitas daily arrivals")
# plot timeline of daily arrivals with selected policy change labels
arrival_counts  %>%
ggplot(aes(x = date,
y = n,
label = description,
color = category)) +
geom_col(fill ="grey", show.legend = FALSE) +
geom_line(aes(y = seven_avg),
color = 'black', size = .6) +
geom_point(data = arrival_counts %>% filter(!is.na(description)),
show.legend = FALSE) +
geom_label_repel(na.rm = TRUE,
size = 2,
show.legend = FALSE,
nudge_y = 170,
max.overlaps = 11) +
scale_x_date(date_breaks="1 month",
date_labels="%b",
expand = c(.02,-.02)) +
scale_color_colorblind() +
labs(x = element_blank(),
y = "Daily Shelter Arrivals",
title = "Migration and policy events in 2021",
subtitle = "with Casa Alitas daily arrivals")
# plot timeline of daily arrivals with selected policy change labels
arrival_counts  %>%
ggplot(aes(x = date,
y = n,
label = description,
color = category)) +
geom_col(fill ="grey", color = "grey", show.legend = FALSE) +
geom_line(aes(y = seven_avg),
color = 'black', size = .6) +
geom_point(data = arrival_counts %>% filter(!is.na(description)),
show.legend = FALSE) +
geom_label_repel(na.rm = TRUE,
size = 2,
show.legend = FALSE,
nudge_y = 170,
max.overlaps = 11) +
scale_x_date(date_breaks="1 month",
date_labels="%b",
expand = c(.02,-.02)) +
scale_color_colorblind() +
labs(x = element_blank(),
y = "Daily Shelter Arrivals",
title = "Migration and policy events in 2021",
subtitle = "with Casa Alitas daily arrivals")
# plot timeline of daily arrivals with selected policy change labels
arrival_counts  %>%
ggplot(aes(x = date,
y = n,
label = description,
color = category)) +
geom_col(fill ="grey", show.legend = FALSE) +
geom_line(aes(y = seven_avg),
color = 'black', size = .6) +
geom_point(data = arrival_counts %>% filter(!is.na(description)),
show.legend = FALSE) +
geom_label_repel(na.rm = TRUE,
size = 2,
show.legend = FALSE,
nudge_y = 170,
max.overlaps = 11) +
scale_x_date(date_breaks="1 month",
date_labels="%b",
expand = c(.02,-.02)) +
scale_color_colorblind() +
labs(x = element_blank(),
y = "Daily Shelter Arrivals",
title = "Migration and policy events in 2021",
subtitle = "with Casa Alitas daily arrivals")
# plot timeline of daily arrivals with selected policy change labels
arrival_counts  %>%
ggplot(aes(x = date,
y = n,
label = description,
color = category)) +
geom_col(fill ="grey", show.legend = FALSE) +
geom_line(aes(y = seven_avg),
color = 'black', size = .6) +
geom_label_repel(na.rm = TRUE,
size = 2,
show.legend = FALSE,
nudge_y = 170,
max.overlaps = 11) +
scale_x_date(date_breaks="1 month",
date_labels="%b",
expand = c(.02,-.02)) +
scale_color_colorblind() +
labs(x = element_blank(),
y = "Daily Shelter Arrivals",
title = "Migration and policy events in 2021",
subtitle = "with Casa Alitas daily arrivals")
# plot timeline of daily arrivals with selected policy change labels
arrival_counts  %>%
ggplot(aes(x = date,
y = n,
label = description)) +
geom_col(fill ="grey", show.legend = FALSE) +
geom_line(aes(y = seven_avg),
color = 'black', size = .6) +
geom_label_repel(aes(color = category),
na.rm = TRUE,
size = 2,
show.legend = FALSE,
nudge_y = 170,
max.overlaps = 11) +
scale_x_date(date_breaks="1 month",
date_labels="%b",
expand = c(.02,-.02)) +
scale_color_colorblind() +
labs(x = element_blank(),
y = "Daily Shelter Arrivals",
title = "Migration and policy events in 2021",
subtitle = "with Casa Alitas daily arrivals")
# plot timeline of daily arrivals with selected policy change labels
arrival_counts  %>%
ggplot(aes(x = date,
y = n,
label = description)) +
geom_col(fill ="grey", show.legend = FALSE) +
geom_line(aes(y = seven_avg),
color = 'black', size = .6) +
geom_label_repel(aes(color = category),
na.rm = TRUE,
size = 2,
show.legend = FALSE,
nudge_y = 170,
max.overlaps = 11) +
geom_point(data = arrival_counts %>% filter(!is.na(description)),
show.legend = FALSE) +
scale_x_date(date_breaks="1 month",
date_labels="%b",
expand = c(.02,-.02)) +
scale_color_colorblind() +
labs(x = element_blank(),
y = "Daily Shelter Arrivals",
title = "Migration and policy events in 2021",
subtitle = "with Casa Alitas daily arrivals")
# plot timeline of daily arrivals with selected policy change labels
arrival_counts  %>%
ggplot(aes(x = date,
y = n,
label = description)) +
geom_col(fill ="grey", show.legend = FALSE) +
geom_line(aes(y = seven_avg),
color = 'black', size = .6) +
geom_label_repel(aes(color = category),
na.rm = TRUE,
size = 2,
show.legend = FALSE,
nudge_y = 170,
max.overlaps = 11) +
geom_point(aes(color = category),
data = arrival_counts %>% filter(!is.na(description)),
show.legend = FALSE) +
scale_x_date(date_breaks="1 month",
date_labels="%b",
expand = c(.02,-.02)) +
scale_color_colorblind() +
labs(x = element_blank(),
y = "Daily Shelter Arrivals",
title = "Migration and policy events in 2021",
subtitle = "with Casa Alitas daily arrivals")
group_counts %>%
filter(country %in% some_countries) %>% # get rid of NAs!
ggplot(aes(x = arrival_date,
y = factor(country, rev(countries$country)))) +
geom_point(alpha = .1) +
geom_vline(data = key_policy_events,
aes(xintercept = date,
color = category),
na.rm = TRUE,
size = .75) +
theme(legend.position = "top", legend.justification = 1.5, plot.title.position = "legend") + #, legend.direction legend.text.align = -1,
labs(title = "Migration policy shifts affected different nationalities differently",
x = element_blank(),
y = element_blank(),
color = element_blank()) +
scale_x_date(date_breaks = "1 month",
date_labels = "%b",
expand = c(.02,-.02)) +
scale_color_colorblind()
group_counts %>%
filter(country %in% some_countries) %>% # get rid of NAs!
ggplot(aes(x = arrival_date,
y = factor(country, rev(countries$country)))) +
geom_point(alpha = .1) +
geom_vline(data = key_policy_events,
aes(xintercept = date,
color = category),
na.rm = TRUE,
size = .75) +
theme(legend.position = "top", legend.justification = 1.5, plot.title.position = "box") + #, legend.direction legend.text.align = -1,
labs(title = "Migration policy shifts affected different nationalities differently",
x = element_blank(),
y = element_blank(),
color = element_blank()) +
scale_x_date(date_breaks = "1 month",
date_labels = "%b",
expand = c(.02,-.02)) +
scale_color_colorblind()
group_counts %>%
filter(country %in% some_countries) %>% # get rid of NAs!
ggplot(aes(x = arrival_date,
y = factor(country, rev(countries$country)))) +
geom_point(alpha = .1) +
geom_vline(data = key_policy_events,
aes(xintercept = date,
color = category),
na.rm = TRUE,
size = .75) +
theme(legend.position = "top", legend.justification = 1.5, plot.title.position = "plot") + #, legend.direction legend.text.align = -1,
labs(title = "Migration policy shifts affected different nationalities differently",
x = element_blank(),
y = element_blank(),
color = element_blank()) +
scale_x_date(date_breaks = "1 month",
date_labels = "%b",
expand = c(.02,-.02)) +
scale_color_colorblind()
group_counts %>%
filter(country %in% some_countries) %>% # get rid of NAs!
ggplot(aes(x = arrival_date,
y = factor(country, rev(countries$country)))) +
geom_point(alpha = .1) +
geom_vline(data = key_policy_events,
aes(xintercept = date,
color = category),
na.rm = TRUE,
size = .75) +
theme(legend.position = "top", legend.justification = 1.5) + #, legend.direction legend.text.align = -1,
labs(title = "Migration policy shifts affected different nationalities differently",
x = element_blank(),
y = element_blank(),
color = element_blank()) +
scale_x_date(date_breaks = "1 month",
date_labels = "%b",
expand = c(.02,-.02)) +
scale_color_colorblind()
group_counts %>%
ggplot(aes(x = arrival_date,
y = number_in_party)) +
geom_jitter(aes(size = number_in_party),
alpha = .1, na.rm = TRUE,
show.legend = FALSE) +
scale_x_date(date_breaks="1 month",
date_labels="%b",
expand = c(.02,-.05)) +
geom_vline(data = key_policy_events,
aes(xintercept = date,
color = category),
na.rm = TRUE,
size = .75) +
labs(title ="Migration policy shifts affected individuals and groups differently",
x = element_blank(),
y = "Group Size",
color = element_blank()) +
scale_color_colorblind() +
theme(legend.position = "top", legend.justification = -.5)
group_counts %>%
ggplot(aes(x = arrival_date,
y = number_in_party)) +
geom_jitter(aes(size = number_in_party),
alpha = .1, na.rm = TRUE,
show.legend = FALSE) +
scale_x_date(date_breaks="1 month",
date_labels="%b",
expand = c(.02,-.5)) +
geom_vline(data = key_policy_events,
aes(xintercept = date,
color = category),
na.rm = TRUE,
size = .75) +
labs(title ="Migration policy shifts affected individuals and groups differently",
x = element_blank(),
y = "Group Size",
color = element_blank()) +
scale_color_colorblind() +
theme(legend.position = "top", legend.justification = -.5)
library(ggrepel)
library(ggthemes)
library(knitr)
library(tidyverse)
library(scales)
opts_chunk$set(echo = FALSE, message=FALSE, warning=FALSE)
policy_events <- read_csv("data/selected_policy_events_2021.csv", skip = 2) %>%
mutate(date = parse_date(date, format = "%m/%d/%Y")) #%>%
key_policy_events <- policy_events %>%
filter(category %in% c('MPP ("Remain in Mexico")',
'Temporary Protected Status',
'Title 42',
'Detention')) %>%
mutate(category = factor(category, levels=c('MPP ("Remain in Mexico")',
'Temporary Protected Status',
'Title 42',
'Detention')))
arrival_counts <- read_csv("data/arrival_date_counts_1.20.csv") %>%
rename("date" = arrival_date) %>%
add_row(date = as.Date("2021-01-20"), n = 0, seven_avg = 0, .before = 1) %>% # add row for first event
left_join(key_policy_events)%>%
mutate(category = category)
group_counts <- read_csv("data/groups_limited_1.20.csv") %>%
filter(number_in_party != 0)%>%
rename("country" = country1)
countries <- read_csv("data/country_counts_1.20.csv")%>%
drop_na(country)
# set plot theme            # FIGURE SIZE??
theme_set(theme_minimal(13))
# plot timeline of daily arrivals with selected policy change labels
arrival_counts  %>%
ggplot(aes(x = date,
y = n,
label = description)) +
geom_col(fill ="grey", show.legend = FALSE) +
geom_line(aes(y = seven_avg),
color = 'black', size = .6) +
geom_label_repel(aes(color = category),
fontface = "bold",
na.rm = TRUE,
size = 2,
show.legend = FALSE,
nudge_y = 165,  # CHANGE FOR PDF
max.overlaps = 11) +
geom_point(aes(color = category),
data = arrival_counts %>% filter(!is.na(description)),
show.legend = FALSE) +
scale_x_date(date_breaks="1 month",
date_labels="%b",
expand = c(.02,-.02)) +
scale_color_brewer(type = "qual", palette = "Dark2") +
labs(x = element_blank(),
y = "Daily Shelter Arrivals",
title = "Asylum seekers and migration policy events in 2021",
#subtitle = "Casa Alitas Program, Tucson, AZ",
caption = "Sources: Casa Alitas Program (CCS-SOAZ) & Investigative Reporting Workshop")
key_policy_events %>%
kable(caption = "Table 1: Immigration Policy Events in 2021 (Source: Investigative Reporting Workshop)",
label = "Table 1")
#fig.width=7,
# visualize policy changes & 7-day-rolling mean of daily arrivals
arrival_counts  %>%
ggplot(aes(x = date,
y = n,
label = description)) +
geom_line(aes(y = seven_avg),
color = 'darkgrey', size = .8) +
geom_vline(data = key_policy_events,
aes(xintercept = date,
color = category,
linetype = category),
na.rm = TRUE,
size = 1.1) +
scale_color_brewer(type = "qual", palette = "Dark2") +
labs(title = "Migration policy changes affect daily shelter arrivals",
color = element_blank(),
linetype = element_blank(),
x = element_blank(),
y = "Daily Shelter Arrivals",
caption = "Sources: Casa Alitas Program (CCS-SOAZ) & Investigative Reporting Workshop") +
theme(legend.position = "top",
legend.justification = 1) +
#scale_color_colorblind() +
scale_x_date(date_breaks="1 month",
date_labels="%b",
expand = c(.02,-.02))
# Arrivals by country over time dot plot
some_countries <- countries$country[countries$n > 100]
group_counts %>%
filter(country %in% some_countries) %>% # get rid of NAs
ggplot(aes(x = arrival_date,
y = factor(country, rev(countries$country)))) +
geom_point(alpha = .1) +
geom_vline(data = key_policy_events,
aes(xintercept = date,
color = category,
linetype = category),
na.rm = TRUE,
size = 1.1) +
theme(legend.position = "top", legend.justification = 1) +
scale_color_brewer(type = "qual", palette = "Dark2") +
labs(title = "Migration policy shifts affect nationalities differently",
x = element_blank(),
y = element_blank(),
color = element_blank(),
linetype = element_blank(),
caption = "Sources: Casa Alitas Program (CCS-SOAZ) & Investigative Reporting Workshop") +
scale_x_date(date_breaks = "1 month",
date_labels = "%b",
expand = c(.02,-.02))
#scale_color_colorblind()
# Arrivals by country over time dot plot
some_countries <- countries$country[countries$n > 100]
group_counts %>%
filter(country %in% some_countries) %>% # get rid of NAs
ggplot(aes(x = arrival_date,
y = factor(country, rev(countries$country)))) +
geom_point(alpha = .1) +
geom_vline(data = key_policy_events,
aes(xintercept = date,
color = category,
linetype = category),
na.rm = TRUE,
size = 1.1) +
theme(legend.position = "top", legend.justification = 1) +
scale_color_brewer(type = "qual", palette = "Dark2") +
labs(title = "Migration policy shifts affect nationalities differently",
x = element_blank(),
y = element_blank(),
color = element_blank(),
linetype = element_blank(),
caption = "Sources: Casa Alitas Program (CCS-SOAZ) & Investigative Reporting Workshop") +
scale_x_date(date_breaks = "1 month",
date_labels = "%b",
expand = c(.02,-.02))
#scale_color_colorblind()
#fig.width=7,
group_counts %>%
ggplot(aes(x = arrival_date,
y = number_in_party)) +
geom_jitter(aes(size = number_in_party),
alpha = .1, na.rm = TRUE,
show.legend = FALSE) +
scale_x_date(date_breaks="1 month",
date_labels="%b",
expand = c(.02,-.02)) +
geom_vline(data = key_policy_events,
aes(xintercept = date,
color = category,
linetype = category),
na.rm = TRUE,
size = 1.1) +
scale_color_brewer(type = "qual", palette = "Dark2") +
labs(title ="Migration policy shifts affect individuals and groups differently",
x = element_blank(),
y = "Group Size",
color = element_blank(),
linetype=element_blank(),
caption = "Sources: Casa Alitas Program (CCS-SOAZ) & Investigative Reporting Workshop") +
#scale_color_colorblind() +
theme(legend.position = "top", legend.justification = -.5)

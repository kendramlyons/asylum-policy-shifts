# set plot theme
theme_set(theme_minimal(13))
# visualize policy changes & 7-day-rolling mean of daily arrivals
arrival_counts  %>%
ggplot(aes(x = date,
y = n,
label = description)) +
geom_line(aes(y = seven_avg),
color = 'darkgrey', size = .6) +
geom_vline(data = key_policy_events,
aes(xintercept = date,
color = category),
na.rm = TRUE,
size = .75) +
labs(title = "Migration policy changes affected daily shelter arrivals",
color = element_blank(),
x = element_blank(),
y = "Daily Shelter Arrivals") +
theme(legend.position = "top") +
scale_color_colorblind() +
scale_x_date(date_breaks="1 month",
date_labels="%b")
key_policy_events %>%
kable(caption = "Immigration Policy Changes in 2021 (Source: Investigative Reporting Workshop)")
# plot timeline of daily arrivals with selected policy change labels
arrival_counts  %>%
ggplot(aes(x = date,
y = n,
label = description)) +
geom_col(color = "grey") +
geom_line(aes(y = seven_avg),
color = 'black', size = .6) +
geom_point(data = arrival_counts %>% filter(!is.na(description)),
aes(color = category),
show.legend = FALSE) +
geom_label_repel(aes(color = category),
na.rm = TRUE,
size = 2.5,
show.legend = FALSE,
nudge_y = 160,
max.overlaps = 11) +
scale_x_date(date_breaks="1 month",
date_labels="%b") +
scale_color_colorblind() +
theme_minimal() +
labs(x = element_blank(),
y = "Daily Shelter Arrivals",
title = "Migration policy changes in 2021")
# plot timeline of daily arrivals with selected policy change labels
arrival_counts  %>%
ggplot(aes(x = date,
y = n,
label = description)) +
geom_col(color = "grey") +
geom_line(aes(y = seven_avg),
color = 'black', size = .6) +
geom_point(data = arrival_counts %>% filter(!is.na(description)),
aes(color = category),
show.legend = FALSE) +
geom_label_repel(aes(color = category),
na.rm = TRUE,
size = 2.5,
show.legend = FALSE,
nudge_y = 160,
max.overlaps = 11) +
scale_x_date(date_breaks="1 month",
date_labels="%b") +
scale_color_colorblind() +
theme_minimal() +
labs(x = element_blank(),
y = "Daily Shelter Arrivals",
title = "Migration policy changes in 2021",
subtitle = "With Casa Alitas Daily Arrivals")
# plot timeline of daily arrivals with selected policy change labels
arrival_counts  %>%
ggplot(aes(x = date,
y = n,
label = description)) +
geom_col(color = "grey") +
geom_line(aes(y = seven_avg),
color = 'black', size = .6) +
geom_point(data = arrival_counts %>% filter(!is.na(description)),
aes(color = category),
show.legend = FALSE) +
geom_label_repel(aes(color = category),
na.rm = TRUE,
size = 2.5,
show.legend = FALSE,
nudge_y = 160,
max.overlaps = 11) +
scale_x_date(date_breaks="1 month",
date_labels="%b") +
scale_color_colorblind() +
theme_minimal() +
labs(x = element_blank(),
y = "Daily Shelter Arrivals",
title = "Migration policy changes in 2021",
subtitle = "with Casa Alitas daily arrivals")
# plot timeline of daily arrivals with selected policy change labels
arrival_counts  %>%
ggplot(aes(x = date,
y = n,
label = description)) +
geom_col(color = "grey") +
geom_line(aes(y = seven_avg),
color = 'black', size = .6) +
geom_point(data = arrival_counts %>% filter(!is.na(description)),
aes(color = category),
show.legend = FALSE) +
geom_label_repel(aes(color = category),
na.rm = TRUE,
size = 2.5,
show.legend = FALSE,
nudge_y = 160,
max.overlaps = 11) +
scale_x_date(date_breaks="1 month",
date_labels="%b") +
scale_color_colorblind() +
theme_minimal() +
labs(x = element_blank(),
y = "Daily Shelter Arrivals",
title = "Migration policy changes in 2021",
subtitle = "with Casa Alitas daily arrivals")
# plot timeline of daily arrivals with selected policy change labels
arrival_counts  %>%
ggplot(aes(x = date,
y = n,
label = description)) +
geom_col(color = "grey") +
geom_line(aes(y = seven_avg),
color = 'black', size = .6) +
geom_point(data = arrival_counts %>% filter(!is.na(description)),
aes(color = category),
show.legend = FALSE) +
geom_label_repel(aes(color = category),
na.rm = TRUE,
size = 2.5,
show.legend = FALSE,
nudge_y = 160,
max.overlaps = 11) +
scale_x_date(date_breaks="1 month",
date_labels="%b") +
scale_color_colorblind() +
theme_minimal() +
labs(x = element_blank(),
y = "Daily Shelter Arrivals",
title = "Migration policy changes in 2021",
subtitle = "with Casa Alitas daily arrivals")
# set plot theme
theme_set(theme_minimal(13))
# visualize policy changes & 7-day-rolling mean of daily arrivals
arrival_counts  %>%
ggplot(aes(x = date,
y = n,
label = description)) +
geom_line(aes(y = seven_avg),
color = 'darkgrey', size = .6) +
geom_vline(data = key_policy_events,
aes(xintercept = date,
color = category),
na.rm = TRUE,
size = .75) +
labs(title = "Migration policy changes affected daily shelter arrivals",
color = element_blank(),
x = element_blank(),
y = "Daily Shelter Arrivals") +
theme(legend.position = "top") +
scale_color_colorblind() +
scale_x_date(date_breaks="1 month",
date_labels="%b")
key_policy_events %>%
kable(caption = "Immigration Policy Changes in 2021 (Source: Investigative Reporting Workshop)")
# plot timeline of daily arrivals with selected policy change labels
arrival_counts  %>%
ggplot(aes(x = date,
y = n,
label = description)) +
geom_col(color = "grey") +
geom_line(aes(y = seven_avg),
color = 'black', size = .6) +
geom_point(data = arrival_counts %>% filter(!is.na(description)),
aes(color = category),
show.legend = FALSE) +
geom_label_repel(aes(color = category),
na.rm = TRUE,
size = 2.5,
show.legend = FALSE,
nudge_y = 160,
max.overlaps = 11) +
scale_x_date(date_breaks="1 month",
date_labels="%b") +
scale_color_colorblind() +
theme_minimal() +
labs(x = element_blank(),
y = "Daily Shelter Arrivals",
title = "Migration policy changes in 2021",
subtitle = "with Casa Alitas daily arrivals")
# plot timeline of daily arrivals with selected policy change labels
arrival_counts  %>%
ggplot(aes(x = date,
y = n,
label = description)) +
geom_col(color = "grey") +
geom_line(aes(y = seven_avg),
color = 'black', size = .6) +
geom_point(data = arrival_counts %>% filter(!is.na(description)),
aes(color = category),
show.legend = FALSE) +
geom_label_repel(aes(color = category),
na.rm = TRUE,
size = 3,
show.legend = FALSE,
nudge_y = 160,
max.overlaps = 11) +
scale_x_date(date_breaks="1 month",
date_labels="%b") +
scale_color_colorblind() +
theme_minimal() +
labs(x = element_blank(),
y = "Daily Shelter Arrivals",
title = "Migration policy changes in 2021",
subtitle = "with Casa Alitas daily arrivals")
group_counts %>%
ggplot(aes(x = arrival_date,
y = number_in_party)) +
geom_jitter(aes(size = number_in_party),
alpha = .1, na.rm = TRUE,
show.legend = FALSE) +
scale_x_date(date_breaks="1 month",
date_labels="%b") +
geom_vline(data = key_policy_events,
aes(xintercept = date,
color = category),
na.rm = TRUE,
size = .75) +
labs(title ="Migration policy shifts coincide with group size fluctuations",
x = element_blank(),
y = "Group Size",
color = element_blank()) +
scale_color_colorblind() +
theme(legend.position = "top")
# migration policy shifts affect individuals and groups differently
# plot timeline of daily arrivals with selected policy change labels
arrival_counts  %>%
ggplot(aes(x = date,
y = n,
label = description)) +
geom_col(color = "grey") +
geom_line(aes(y = seven_avg),
color = 'black', size = .6) +
geom_point(data = arrival_counts %>% filter(!is.na(description)),
aes(color = category),
show.legend = FALSE) +
geom_label_repel(aes(color = category),
na.rm = TRUE,
size = 3,
show.legend = FALSE,
nudge_y = 160,
max.overlaps = 11) +
scale_x_date(date_breaks="1 month",
date_labels="%b") +
scale_color_colorblind() +
theme_minimal() +
labs(x = element_blank(),
y = "Daily Shelter Arrivals",
title = "Migration and policy events in 2021",
subtitle = "with Casa Alitas daily arrivals")
# Arrivals by country over time dot plot
some_countries <- countries$country[countries$n > 3]
group_counts %>%
filter(country %in% some_countries) %>% # get rid of NAs!
ggplot(aes(x = arrival_date,
y = factor(country, rev(countries$country)))) +
geom_point(alpha = .1) +
geom_vline(data = key_policy_events,
aes(xintercept = date,
color = category),
na.rm = TRUE,
size = .75) +
theme(legend.position = "top") +
labs(title = "Policy effects on arrivals over time by origin country",
x = element_blank(),
y = element_blank(),
color = element_blank()) +
scale_x_date(date_breaks = "1 month",
date_labels = "%b") +
scale_color_colorblind()
View(countries)
# plot timeline of daily arrivals with selected policy change labels
arrival_counts  %>%
ggplot(aes(x = date,
y = n,
label = description)) +
geom_col(color = "grey") +
geom_line(aes(y = seven_avg),
color = 'black', size = .6) +
geom_point(data = arrival_counts %>% filter(!is.na(description)),
aes(color = category),
show.legend = FALSE) +
geom_label_repel(aes(color = category),
na.rm = TRUE,
size = 3,
show.legend = FALSE,
nudge_y = 170,
max.overlaps = 11) +
scale_x_date(date_breaks="1 month",
date_labels="%b") +
scale_color_colorblind() +
theme_minimal() +
labs(x = element_blank(),
y = "Daily Shelter Arrivals",
title = "Migration and policy events in 2021",
subtitle = "with Casa Alitas daily arrivals")
# plot timeline of daily arrivals with selected policy change labels
arrival_counts  %>%
ggplot(aes(x = date,
y = n,
label = description)) +
geom_col(color = "grey") +
geom_line(aes(y = seven_avg),
color = 'black', size = .6) +
geom_point(data = arrival_counts %>% filter(!is.na(description)),
aes(color = category),
show.legend = FALSE) +
geom_label_repel(aes(color = category),
na.rm = TRUE,
size = 3,
show.legend = FALSE,
nudge_y = 170,
max.overlaps = 11) +
scale_x_date(date_breaks="1 month",
date_labels="%b") +
scale_color_colorblind() +
theme_minimal() +
labs(x = element_blank(),
y = "Daily Shelter Arrivals",
title = "Migration and policy events in 2021",
subtitle = "with Casa Alitas daily arrivals")
# plot timeline of daily arrivals with selected policy change labels
arrival_counts  %>%
ggplot(aes(x = date,
y = n,
label = description)) +
geom_col(color = "grey") +
geom_line(aes(y = seven_avg),
color = 'black', size = .6) +
geom_point(data = arrival_counts %>% filter(!is.na(description)),
aes(color = category),
show.legend = FALSE) +
geom_label_repel(aes(color = category),
na.rm = TRUE,
size = 3,
show.legend = FALSE,
nudge_y = 170,
max.overlaps = 11) +
scale_x_date(date_breaks="1 month",
date_labels="%b") +
scale_color_colorblind() +
theme_minimal() +
labs(x = element_blank(),
y = "Daily Shelter Arrivals",
title = "Migration and policy events in 2021",
subtitle = "with Casa Alitas daily arrivals")
# plot timeline of daily arrivals with selected policy change labels
arrival_counts  %>%
ggplot(aes(x = date,
y = n,
label = description)) +
geom_col(color = "grey") +
geom_line(aes(y = seven_avg),
color = 'black', size = .6) +
geom_point(data = arrival_counts %>% filter(!is.na(description)),
aes(color = category),
show.legend = FALSE) +
geom_label_repel(aes(color = category),
na.rm = TRUE,
size = 3,
show.legend = FALSE,
nudge_y = 170,
max.overlaps = 11) +
scale_x_date(date_breaks="1 month",
date_labels="%b") +
scale_color_colorblind() +
labs(x = element_blank(),
y = "Daily Shelter Arrivals",
title = "Migration and policy events in 2021",
subtitle = "with Casa Alitas daily arrivals")
# plot timeline of daily arrivals with selected policy change labels
arrival_counts  %>%
ggplot(aes(x = date,
y = n,
label = description)) +
geom_col(color = "grey") +
geom_line(aes(y = seven_avg),
color = 'black', size = .6) +
geom_point(data = arrival_counts %>% filter(!is.na(description)),
aes(color = category),
show.legend = FALSE) +
geom_label_repel(aes(color = category),
na.rm = TRUE,
size = 3,
show.legend = FALSE,
nudge_y = 170,
max.overlaps = 11) +
scale_x_date(date_breaks="1 month",
date_labels="%b") +
scale_color_colorblind() +
labs(x = element_blank(),
y = "Daily Shelter Arrivals",
title = "Migration and policy events in 2021",
subtitle = "with Casa Alitas daily arrivals")
# plot timeline of daily arrivals with selected policy change labels
arrival_counts  %>%
ggplot(aes(x = date,
y = n,
label = description)) +
geom_col(color = "grey") +
geom_line(aes(y = seven_avg),
color = 'black', size = .6) +
geom_point(data = arrival_counts %>% filter(!is.na(description)),
aes(color = category),
show.legend = FALSE) +
geom_label_repel(aes(color = category),
na.rm = TRUE,
size = 2,
show.legend = FALSE,
nudge_y = 170,
max.overlaps = 11) +
scale_x_date(date_breaks="1 month",
date_labels="%b") +
scale_color_colorblind() +
labs(x = element_blank(),
y = "Daily Shelter Arrivals",
title = "Migration and policy events in 2021",
subtitle = "with Casa Alitas daily arrivals")
# plot timeline of daily arrivals with selected policy change labels
arrival_counts  %>%
ggplot(aes(x = date,
y = n,
label = description)) +
geom_col(color = "grey") +
geom_line(aes(y = seven_avg),
color = 'black', size = .6) +
geom_point(data = arrival_counts %>% filter(!is.na(description)),
aes(color = category),
show.legend = FALSE) +
geom_label_repel(aes(color = category),
na.rm = TRUE,
size = 2,
show.legend = FALSE,
nudge_y = 170,
max.overlaps = 11) +
scale_x_date(date_breaks="1 month",
date_labels="%b") +
scale_color_colorblind() +
labs(x = element_blank(),
y = "Daily Shelter Arrivals",
title = "Migration and policy events in 2021",
subtitle = "with Casa Alitas daily arrivals")
# plot timeline of daily arrivals with selected policy change labels
arrival_counts  %>%
ggplot(aes(x = date,
y = n,
label = description)) +
geom_col(color = "grey", fill ="grey") +
geom_line(aes(y = seven_avg),
color = 'black', size = .6) +
geom_point(data = arrival_counts %>% filter(!is.na(description)),
aes(color = category),
show.legend = FALSE) +
geom_label_repel(aes(color = category),
na.rm = TRUE,
size = 2,
show.legend = FALSE,
nudge_y = 170,
max.overlaps = 11) +
scale_x_date(date_breaks="1 month",
date_labels="%b") +
scale_color_colorblind() +
labs(x = element_blank(),
y = "Daily Shelter Arrivals",
title = "Migration and policy events in 2021",
subtitle = "with Casa Alitas daily arrivals")
# Arrivals by country over time dot plot
some_countries <- countries$country[countries$n > 3]
group_counts %>%
filter(country %in% some_countries) %>% # get rid of NAs!
ggplot(aes(x = arrival_date,
y = factor(country, rev(countries$country)))) +
geom_point(alpha = .1) +
geom_vline(data = key_policy_events,
aes(xintercept = date,
color = category),
na.rm = TRUE,
size = .75) +
theme(legend.position = "top") +
labs(title = "Policy effects on arrivals over time by origin country",
x = element_blank(),
y = element_blank(),
color = element_blank()) +
scale_x_date(date_breaks = "1 month",
date_labels = "%b") +
scale_color_colorblind()
library(ggthemes)
library(janitor)
library(knitr)
library(tidyverse)
opts_chunk$set(echo = TRUE, message = FALSE, warning = FALSE)
yuma_only %>% # all daily arrivals from Yuma
ggplot(aes(x = arrival_date)) +
geom_bar() +
labs(title = "Daily Arrivals From Yuma", subtitle = "May 10, 2021 - March 8, 2022", x = element_blank(), y = "Number of Individuals")
